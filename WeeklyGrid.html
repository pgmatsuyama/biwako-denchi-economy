<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>びわ湖電池シミュレーター</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: sans-serif; padding: 1em; background: #fff; }
    .grid { display: grid; grid-template-columns: repeat(48, 16px); gap: 2px; margin-bottom: 1px;} //1em; }
    .slot {
      width: 16px; height: 12px; border: 1px solid #ccc; cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      font-size: 16px; font-weight: bold; line-height: 1;
    }
    .pumped { background-color: #66f; }
    .generated { background-color: #f66; }
    .idle { background-color: #ccc; }
    .controls { margin-bottom: 1em; }
    .price-day-bar {
      display: grid;
      grid-template-columns: repeat(48, 12px); //16
      gap: 2px;
      height: 4px;
      margin: 2px 0;
    }
    .price-day-bar div {
      width: 14px; height: 10px; border: 1px solid #eee;
    }
    #chart-container { width: 100%; max-width: 760px; margin-top: 2em; }
    canvas { margin-bottom: 1em;   height: 200px !important;}
    button { font-size: 1em; margin-right: 4px; padding: 4px 8px; }
    button.active {
      border: 3px solid #333;
     box-shadow: 0 0 4px #999;
     background-color: #eef;
   }
  </style>
</head>
<body>
  <h1>びわ湖電池シミュレーター</h1>
  <div class="controls">
    <input type="date" id="startDate" value="2024-04-01" />
    <button data-mode="pumped" onclick="setMode('pumped')">💧 揚水</button>
    <button data-mode="generated" onclick="setMode('generated')">⚡ 発電</button>
    <button data-mode="idle" onclick="setMode('idle')">🛌 休止</button>
    <button onclick="saveStrategy()">💾 戦略保存</button>
    <button onclick="loadStrategy()">📂 戦略復元</button>
    <button onclick="bankMoney()">💰 貯金</button>
    <button onclick="runSimulation()">▶️ 実行</button>
    <!--
    <label>表示モード:
      <select id="iconMode" onchange="createGrid()">
        <option value="emoji">💧⚡□</option>
        <option value="arrow">↓↑□</option>
        <option value="color">色のみ</option>
      </select>
    </label>
    -->
  </div>
  <div id="week-grid"></div>
  <div id="chart-container">
    <canvas id="waterChart"></canvas>
    <canvas id="profitChart"></canvas>
  </div>
  <script src="Simulator.js"></script>
</body>
</html>
